#!/usr/bin/env node
import t from"superagent";import e from"chalk";import o from"inquirer";import n from"figlet";import i from"cli-table2";var r={};const a=t,d=e,l=o,s=n,c=i;console.log(d.green(s.textSync("Ticket Info Collector",{font:"Ghost",horizontalLayout:"default",verticalLayout:"default"}))),l.prompt([{name:"trainDate",type:"input",message:"请输入出发日期:"},{name:"startStation",type:"input",message:"请输入出发站:"},{name:"endStation",type:"input",message:"请输入到达站:"}]).then((t=>{C(t)}));const m={"成都":"CDW","徽县":"HYY","北京西":"BXP","广元":"GYW","天水":"TSJ","杭州":"HZH","汉中":"HOY","西安":"XAY","三门峡":"SMF","渑池":"MCF","义马":"YMF","洛阳":"LYF","郑州":"ZZF","民权":"MQF","徐州":"XCH","新沂":"VIH","沭阳":"FMH","淮安":"AUH","盐城":"AFH","泰州":"UTH","扬州":"YLH","宝鸡":"BJY","虢镇":"GZY","略阳":"LYY","两当":"LDY","凤县":"FXY","江油":"JFW"},f=(t=>{const e={};return Object.entries(t).map((([t,o])=>{e[o]=t})),e})(m),p={trainNo:{index:3,title:"车次"},flag:{index:1,title:"售卖信息",render:t=>t.replace("<br/>","")},msg:{index:0,title:"信息"},start:{index:4,title:"始发站",render:t=>f[t]},end:{index:5,title:"终到站",render:t=>f[t]},on:{index:6,title:"出发",render:t=>f[t]},off:{index:7,title:"到达",render:t=>f[t]},onBoardTime:{index:8,title:"出发时间"},offBoardTime:{index:9,title:"到达时间"},duringPeriod:{index:10,title:"经历时间"},topBedCount:{index:23,title:"软卧"},hardBedCount:{index:28,title:"硬卧"},hardSetCount:{index:29,title:"硬座"},secondClassCount:{index:30,title:"二等座"},firstClassCount:{index:1,title:"一等座"},commercialCount:{index:32,title:"商务座"}},u=["trainNo","flag","on","off","onBoardTime","offBoardTime","duringPeriod","topBedCount","hardBedCount","hardSetCount"],x={"sec-ch-ua-mobile":"?0","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36","Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty",Cookie:"JSESSIONID=5C707A074EE2BCCBE9F342363FF86ACF;",Host:"kyfw.12306.cn"},C=({trainDate:t,startStation:e,endStation:o})=>{const n=`https://kyfw.12306.cn/otn/leftTicket/query?leftTicketDTO.train_date=${t}&leftTicketDTO.from_station=${m[e]}&leftTicketDTO.to_station=${m[o]}&purpose_codes=ADULT`;a.get(n).set(x).end(((t,e)=>{t&&console.log("Error occurred.");try{const{data:t}=JSON.parse(e.text);(t=>{const e=new c({head:u.map((t=>p[t].title))}),o=t.map((t=>{const o=t.split("|"),n={};for(const t of u)n[t]={title:p[t].title,data:p[t].render?p[t].render(o[p[t].index]):o[p[t].index]};return e.push(Object.values(n).map((({data:t})=>t))),n}));console.log(e.toString())})(t.result)}catch(t){console.log("网络出了些问题，请联系作者或者稍候再试.")}}))};export{r as default};
//# sourceMappingURL=bundle.mjs.js.map
